[TOC]

## 类设计

### 位置逻辑图（PGraph类）

#### 接口

* [PathData](####PathData) getLocate (void)

  返回当前所在路径

* int getPos(void)

  返回当前距当前路径起点的长度

* void init(void)

  从数据库初始化当前图。

* int* getShortestRoute(int end)

  * end为终点的节点序号
  * 返回的是一个节点序列

* void navigation(int end)

  从当前位置导航到目的地。期间会持续更新用户的当前位置信息。

  ？？ 同时，关闭对头盔移动的监听





*信息集合，不一定是*

## ??Struct

*路径信息*

### PathData

| 变量名 | 类型  | 备注                      |
| ------ | ----- | ------------------------- |
| length | float | 路径长度[^1]              |
| start  | int   | 起始节点                  |
| end    | int   | 终点                      |
| vUrl   | text  | 路径对应的视频的路径[^ 2] |

[^1]: 路径的长度即其对应的视频的时长

[^2 ]: 路径统一为相对路径。存在工程文件下的？？中。



*节点*

### Node

| 变量名            | 类型    | 备注                           |
| ----------------- | ------- | ------------------------------ |
| id                | int     | 节点序号                       |
| name              | varchar | 节点名称（例如饭堂门口、操场） |
| （待定）longitude | decimal | 经度                           |
| （待定）latidude  | decimal | 纬度                           |



*用户当前位置信息*

### Position

| 变量名      | 类型           | 备注                   |
| ----------- | -------------- | ---------------------- |
| locatedPath | PathData       | 当前所在路径的路径信息 |
| angle       | ？（四元数？） | 头盔偏转角             |
| location    | float          | 0.0~1.0，0在表示起点   |



*用户动作信息*

### UserAction

| 变量名    | 类型 | 备注 |
| --------- | ---- | ---- |
| ifMove    | ？？ |      |
| direction | ? ?  | 朝向 |





