[TOC]

## [总览](漫游系统 7.11.xmind)

## 校园漫游系统

目前系统大致由如下几个**游戏对象**组成。

* 全景视频
* 二维地图
* vive头盔捕捉
* 位置逻辑图
* 数据库交互模块

每个GameObject对应一个类。

各个GameObject的负责人需要

* 构思其的功能，列出需要用到的接口。
* 向其他类提供接口



此外，还有一些自定义类型，用来存放一些**信息**块

* [PathData](类的设计.md)
* [Node](类的设计.md)
* [Position](类的设计.md)
* [UserAction](类的设计.md)





### vive头盔捕捉

#### 在每一帧中

* 
  
* 获取用户的朝向信息
  * 朝向信息用四元数/欧拉角表示

？？顺序。需要确保其在位置逻辑图更新前执行。



### [位置逻辑图](类的设计.md)

#### 初始化

用户打开系统时，调用 **数据库交互模块** 获得所有的路径、节点信息。

可能需要用的有：路径的起点、终点信息，路径长度

#### 在每一帧中

* 检测vive的变化，更新 **Position**



### 全景视频

#### 在每一帧中

全景视频在每一次 update() 中从 **位置逻辑图中** 的 **用户当前位置信息（Position）** 得到该帧处于哪段视频中的哪一帧。

这算是对原来学长项目的一个优化。原来是用户每移动一次播放一段视频，实际体验的效果比较呆。

这个功能需要能了解全景视频播放接口的使用。



### 二维地图

#### 初始化

用户打开系统时，调用 **数据库交互模块** 获得所有的路径、节点信息。

二维地图可能需要用的有：路径的起点、终点信息，以及节点的**坐标信息**。

也就是说，二维地图的绘制是完全由数据库里的路径、节点信息决定的。这个类需要能够根据一系列坐标点绘制出一张图。

#### 在每一帧中

二维地图在每一次 update() 中从 **位置逻辑图中** 的 **用户当前位置信息（Position）** 得到该帧的位置、朝向信息，然后更新光标的位置、朝向。



## 杂项

#### 是否需要项目管理

unity主要用到的就是Assets，里面除去视频大小不到500M,其中比较大的一些是第三方的比如steamVR，所以是可以放到github或是码云上的。

也可以用svn，据说比git用起来简单。

unity好像也有自带的版本控制软件





#### 是否重写代码

当时我们是想着不重写的，因为里面有很多功能。但现在看来，能用到的并不多，而且学长的工程，场景比较多，我们要一个个理清估计得花点时间。

如果重写一遍代码，好处在于，我们能对我们自己的代码知根知底。然后为数不多的几个能用得上的代码

，要搬进来应该也不难。